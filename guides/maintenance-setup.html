<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>maintenance-setup – Amalgam</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5b4ad623e5705c0698d39aec6f10cf02.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Amalgam</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-guides" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Guides</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-guides">    
        <li>
    <a class="dropdown-item" href="../guides/index.html">
 <span class="dropdown-text">All Guides</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../guides/print-settings.html">
 <span class="dropdown-text">Print Settings &amp; Brand Guide</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../guides/frame-assembly.html">
 <span class="dropdown-text">Frame Assembly</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../guides/klipper-config.html">
 <span class="dropdown-text">Klipper Configuration</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../guides/calibration-guide.html">
 <span class="dropdown-text">Calibration Guide</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../guides/calibration-cheatsheet.html">
 <span class="dropdown-text">Calibration Cheatsheet</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../guides/maintenance-setup.html">
 <span class="dropdown-text">Maintenance &amp; Setup</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reference" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Reference</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-reference">    
        <li>
    <a class="dropdown-item" href="../reference/donor-printer-guide.html">
 <span class="dropdown-text">Donor Printer Guide</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../reference/MASTER_PARTS_LIST.html">
 <span class="dropdown-text">Master Parts List</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../reference/parts-sourcing-guide.html">
 <span class="dropdown-text">Parts Sourcing Guide</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../adr/index.html"> 
<span class="menu-text">ADRs</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-analysis" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Analysis</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-analysis">    
        <li>
    <a class="dropdown-item" href="../analysis/index.html">
 <span class="dropdown-text">Analysis Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../analysis/rod-sag-analysis.html">
 <span class="dropdown-text">Rod Sag Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../analysis/z-height-analysis.html">
 <span class="dropdown-text">Z-Height Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../analysis/single-vs-dual-rod.html">
 <span class="dropdown-text">Single vs Dual Rod</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../analysis/motion-system-comparison.html">
 <span class="dropdown-text">Motion System Comparison</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-deep-dives" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Deep Dives</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-deep-dives">    
        <li>
    <a class="dropdown-item" href="../deep-dives/index.html">
 <span class="dropdown-text">Deep Dives Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_00_decision_guide.html">
 <span class="dropdown-text">Decision Guide</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_01_frame_and_assembly.html">
 <span class="dropdown-text">Frame &amp; Assembly</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_02_xy_axis_system.html">
 <span class="dropdown-text">X-Y Axis System</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_03_motor_mounts_vibration.html">
 <span class="dropdown-text">Motor Mounts &amp; Vibration</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_04_xgantry_design_decision.html">
 <span class="dropdown-text">X-Gantry Design</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_05_psu_configurations.html">
 <span class="dropdown-text">PSU Configurations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_06_extruder_decision.html">
 <span class="dropdown-text">Extruder Decision</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-articles" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Articles</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-articles">    
        <li>
    <a class="dropdown-item" href="../articles/index.html">
 <span class="dropdown-text">All Articles</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../articles/age-of-the-appliance.html">
 <span class="dropdown-text">Age of the Appliance</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/core-engineering-truths.html">
 <span class="dropdown-text">Core Engineering Truths</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/reclaiming-the-reprap-legacy.html">
 <span class="dropdown-text">Reclaiming the RepRap Legacy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/reconfiguration-of-3d-printing-market.html">
 <span class="dropdown-text">Reconfiguration of 3D Printing Market</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/the80-20workshop/amalgam"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../guides/maintenance-setup.html">Mechanical Setup &amp; Maintenance Guide</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Build Guides</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/print-settings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Print Settings &amp; Brand Guide</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/frame-assembly.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Frame Assembly</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/klipper-config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Klipper Configuration</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/calibration-guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Amalgam Calibration Guide</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/calibration-cheatsheet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Amalgam Calibration Cheat Sheet</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/maintenance-setup.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Mechanical Setup &amp; Maintenance Guide</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#mechanical-setup-maintenance-guide" id="toc-mechanical-setup-maintenance-guide" class="nav-link active" data-scroll-target="#mechanical-setup-maintenance-guide">Mechanical Setup &amp; Maintenance Guide</a>
  <ul class="collapse">
  <li><a href="#purpose" id="toc-purpose" class="nav-link" data-scroll-target="#purpose">1. Purpose</a></li>
  <li><a href="#initial-mechanical-setup" id="toc-initial-mechanical-setup" class="nav-link" data-scroll-target="#initial-mechanical-setup">2. Initial Mechanical Setup</a>
  <ul class="collapse">
  <li><a href="#frame-squaring-all-paths" id="toc-frame-squaring-all-paths" class="nav-link" data-scroll-target="#frame-squaring-all-paths">2.1 Frame Squaring (All Paths)</a></li>
  <li><a href="#smooth-rod-installation-scaffold-lathe" id="toc-smooth-rod-installation-scaffold-lathe" class="nav-link" data-scroll-target="#smooth-rod-installation-scaffold-lathe">2.2 Smooth Rod Installation (Scaffold, Lathe)</a></li>
  <li><a href="#v-slot-wheel-setup-mill" id="toc-v-slot-wheel-setup-mill" class="nav-link" data-scroll-target="#v-slot-wheel-setup-mill">2.3 V-Slot Wheel Setup (Mill)</a></li>
  <li><a href="#belt-installation-and-tensioning" id="toc-belt-installation-and-tensioning" class="nav-link" data-scroll-target="#belt-installation-and-tensioning">2.4 Belt Installation and Tensioning</a></li>
  <li><a href="#leadscrew-and-z-axis-setup" id="toc-leadscrew-and-z-axis-setup" class="nav-link" data-scroll-target="#leadscrew-and-z-axis-setup">2.5 Leadscrew and Z-Axis Setup</a></li>
  </ul></li>
  <li><a href="#periodic-maintenance" id="toc-periodic-maintenance" class="nav-link" data-scroll-target="#periodic-maintenance">3. Periodic Maintenance</a>
  <ul class="collapse">
  <li><a href="#maintenance-schedule" id="toc-maintenance-schedule" class="nav-link" data-scroll-target="#maintenance-schedule">3.1 Maintenance Schedule</a></li>
  <li><a href="#monthly-belt-tension-check" id="toc-monthly-belt-tension-check" class="nav-link" data-scroll-target="#monthly-belt-tension-check">3.2 Monthly: Belt Tension Check</a></li>
  <li><a href="#monthly-eccentric-nut-check-mill" id="toc-monthly-eccentric-nut-check-mill" class="nav-link" data-scroll-target="#monthly-eccentric-nut-check-mill">3.3 Monthly: Eccentric Nut Check (Mill)</a></li>
  <li><a href="#quarterly-rod-lubrication-scaffold-lathe" id="toc-quarterly-rod-lubrication-scaffold-lathe" class="nav-link" data-scroll-target="#quarterly-rod-lubrication-scaffold-lathe">3.4 Quarterly: Rod Lubrication (Scaffold, Lathe)</a></li>
  <li><a href="#quarterly-leadscrew-maintenance" id="toc-quarterly-leadscrew-maintenance" class="nav-link" data-scroll-target="#quarterly-leadscrew-maintenance">3.5 Quarterly: Leadscrew Maintenance</a></li>
  <li><a href="#semi-annual-bearing-inspection-scaffold-lathe" id="toc-semi-annual-bearing-inspection-scaffold-lathe" class="nav-link" data-scroll-target="#semi-annual-bearing-inspection-scaffold-lathe">3.6 Semi-Annual: Bearing Inspection (Scaffold, Lathe)</a></li>
  <li><a href="#semi-annual-wheel-inspection-mill" id="toc-semi-annual-wheel-inspection-mill" class="nav-link" data-scroll-target="#semi-annual-wheel-inspection-mill">3.7 Semi-Annual: Wheel Inspection (Mill)</a></li>
  </ul></li>
  <li><a href="#troubleshooting-common-issues" id="toc-troubleshooting-common-issues" class="nav-link" data-scroll-target="#troubleshooting-common-issues">4. Troubleshooting Common Issues</a>
  <ul class="collapse">
  <li><a href="#binding-or-stiff-motion" id="toc-binding-or-stiff-motion" class="nav-link" data-scroll-target="#binding-or-stiff-motion">4.1 Binding or Stiff Motion</a></li>
  <li><a href="#play-or-wobble" id="toc-play-or-wobble" class="nav-link" data-scroll-target="#play-or-wobble">4.2 Play or Wobble</a></li>
  <li><a href="#noise-during-motion" id="toc-noise-during-motion" class="nav-link" data-scroll-target="#noise-during-motion">4.3 Noise During Motion</a></li>
  <li><a href="#z-axis-issues" id="toc-z-axis-issues" class="nav-link" data-scroll-target="#z-axis-issues">4.4 Z-Axis Issues</a></li>
  </ul></li>
  <li><a href="#hotend-maintenance" id="toc-hotend-maintenance" class="nav-link" data-scroll-target="#hotend-maintenance">5. Hotend Maintenance</a>
  <ul class="collapse">
  <li><a href="#nozzle-changes" id="toc-nozzle-changes" class="nav-link" data-scroll-target="#nozzle-changes">5.1 Nozzle Changes</a></li>
  <li><a href="#heat-break-maintenance" id="toc-heat-break-maintenance" class="nav-link" data-scroll-target="#heat-break-maintenance">5.2 Heat Break Maintenance</a></li>
  </ul></li>
  <li><a href="#electronics-maintenance" id="toc-electronics-maintenance" class="nav-link" data-scroll-target="#electronics-maintenance">6. Electronics Maintenance</a>
  <ul class="collapse">
  <li><a href="#connection-checks" id="toc-connection-checks" class="nav-link" data-scroll-target="#connection-checks">6.1 Connection Checks</a></li>
  <li><a href="#fan-cleaning" id="toc-fan-cleaning" class="nav-link" data-scroll-target="#fan-cleaning">6.2 Fan Cleaning</a></li>
  </ul></li>
  <li><a href="#documentation-records" id="toc-documentation-records" class="nav-link" data-scroll-target="#documentation-records">7. Documentation &amp; Records</a>
  <ul class="collapse">
  <li><a href="#what-to-record" id="toc-what-to-record" class="nav-link" data-scroll-target="#what-to-record">7.1 What to Record</a></li>
  <li><a href="#why-it-matters" id="toc-why-it-matters" class="nav-link" data-scroll-target="#why-it-matters">7.2 Why It Matters</a></li>
  <li><a href="#simple-log-format" id="toc-simple-log-format" class="nav-link" data-scroll-target="#simple-log-format">7.3 Simple Log Format</a></li>
  </ul></li>
  <li><a href="#quick-reference-card" id="toc-quick-reference-card" class="nav-link" data-scroll-target="#quick-reference-card">8. Quick Reference Card</a>
  <ul class="collapse">
  <li><a href="#weekly-30-seconds" id="toc-weekly-30-seconds" class="nav-link" data-scroll-target="#weekly-30-seconds">Weekly (30 seconds)</a></li>
  <li><a href="#monthly-5-minutes" id="toc-monthly-5-minutes" class="nav-link" data-scroll-target="#monthly-5-minutes">Monthly (5 minutes)</a></li>
  <li><a href="#quarterly-15-minutes" id="toc-quarterly-15-minutes" class="nav-link" data-scroll-target="#quarterly-15-minutes">Quarterly (15 minutes)</a></li>
  <li><a href="#semi-annually-30-minutes" id="toc-semi-annually-30-minutes" class="nav-link" data-scroll-target="#semi-annually-30-minutes">Semi-Annually (30 minutes)</a></li>
  <li><a href="#annually-1-hour" id="toc-annually-1-hour" class="nav-link" data-scroll-target="#annually-1-hour">Annually (1 hour)</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="mechanical-setup-maintenance-guide" class="level1">
<h1>Mechanical Setup &amp; Maintenance Guide</h1>
<section id="purpose" class="level2">
<h2 class="anchored" data-anchor-id="purpose">1. Purpose</h2>
<p>This guide covers the practical setup and ongoing maintenance for Amalgam. Unlike the analysis documents (which explain <em>why</em>), this guide explains <em>how</em> — step-by-step procedures for keeping your printer running well.</p>
<p><strong>Scope:</strong> Frame-agnostic procedures that apply to all paths (Scaffold, Mill, Lathe), with path-specific sections where needed.</p>
<hr>
</section>
<section id="initial-mechanical-setup" class="level2">
<h2 class="anchored" data-anchor-id="initial-mechanical-setup">2. Initial Mechanical Setup</h2>
<section id="frame-squaring-all-paths" class="level3">
<h3 class="anchored" data-anchor-id="frame-squaring-all-paths">2.1 Frame Squaring (All Paths)</h3>
<p>Before any motion system work, verify your frame is square.</p>
<p><strong>Tools needed:</strong> - Machinist square or large framing square - Measuring tape or calipers - Feeler gauges (optional)</p>
<p><strong>Procedure:</strong></p>
<ol type="1">
<li>Place printer on flat, level surface</li>
<li>Measure diagonals of the frame (corner to corner)
<ul>
<li>Difference should be &lt;2mm for a 300mm frame</li>
<li>If larger, adjust frame joints before proceeding</li>
</ul></li>
<li>Check vertical members with square against MDF base
<ul>
<li>Should be 90° ±0.5°</li>
</ul></li>
<li>For Scaffold path: check M10 rod parallelism
<ul>
<li>Measure spacing at top and bottom</li>
<li>Difference should be &lt;1mm</li>
</ul></li>
</ol>
<p><strong>Why it matters:</strong> A twisted frame causes binding, uneven wear, and dimensional inaccuracy that no amount of calibration can fix.</p>
<hr>
</section>
<section id="smooth-rod-installation-scaffold-lathe" class="level3">
<h3 class="anchored" data-anchor-id="smooth-rod-installation-scaffold-lathe">2.2 Smooth Rod Installation (Scaffold, Lathe)</h3>
<p><strong>Tools needed:</strong> - Flat glass or granite surface plate - Soft mallet (optional) - Isopropyl alcohol and lint-free cloth</p>
<p><strong>Procedure:</strong></p>
<ol type="1">
<li><p><strong>Inspect rods</strong> — Roll each rod on flat glass</p>
<ul>
<li>Watch for wobble indicating bend</li>
<li>Bent rods: discard or straighten (difficult)</li>
</ul></li>
<li><p><strong>Clean rods</strong> — Wipe with IPA, remove all grease and debris</p></li>
<li><p><strong>Install rod holders</strong> — Ensure holders are aligned and secure</p>
<ul>
<li>Both holders for a rod should be in the same plane</li>
</ul></li>
<li><p><strong>Insert rods</strong> — Slide in gently, don’t force</p>
<ul>
<li>If binding, check holder alignment</li>
</ul></li>
<li><p><strong>Check parallelism</strong> — Measure rod spacing at multiple points</p>
<ul>
<li>Maximum deviation: 0.5mm over full length</li>
</ul></li>
<li><p><strong>Light lubrication</strong> — Apply thin film of PTFE lubricant or light machine oil</p>
<ul>
<li>Wipe excess — rod should not look wet</li>
</ul></li>
</ol>
<hr>
</section>
<section id="v-slot-wheel-setup-mill" class="level3">
<h3 class="anchored" data-anchor-id="v-slot-wheel-setup-mill">2.3 V-Slot Wheel Setup (Mill)</h3>
<p><strong>Tools needed:</strong> - Eccentric nut wrench (8mm typically) - Piece of paper</p>
<p><strong>Procedure:</strong></p>
<ol type="1">
<li><p><strong>Identify eccentric nuts</strong> — Usually one per wheel set (bottom or back wheel)</p>
<ul>
<li>The eccentric has an off-center hole</li>
</ul></li>
<li><p><strong>Loosen all eccentric nuts</strong> — Wheels should spin freely</p></li>
<li><p><strong>Position carriage</strong> — Place on V-slot rail</p></li>
<li><p><strong>Adjust first wheel set:</strong></p>
<ul>
<li>Tighten eccentric nut slowly while checking wheel contact</li>
<li>Goal: wheel touches rail with light preload</li>
<li>Test: slide piece of paper between wheel and rail</li>
<li>Correct: paper slides with slight resistance</li>
<li>Too tight: paper won’t slide, or wheel won’t spin freely</li>
<li>Too loose: paper slides freely, carriage wobbles</li>
</ul></li>
<li><p><strong>Repeat for each wheel set</strong> — Carriage should move smoothly without wobble</p></li>
<li><p><strong>Final check</strong> — Push carriage along full travel</p>
<ul>
<li>Should glide smoothly with consistent resistance</li>
<li>No tight spots or wobble</li>
</ul></li>
</ol>
<p><strong>Common mistakes:</strong> - Over-tightening (causes flat spots, premature wear) - Under-tightening (causes wobble, poor print quality) - Adjusting while carriage is loaded (incorrect preload)</p>
<hr>
</section>
<section id="belt-installation-and-tensioning" class="level3">
<h3 class="anchored" data-anchor-id="belt-installation-and-tensioning">2.4 Belt Installation and Tensioning</h3>
<p><strong>Tools needed:</strong> - Belt tension gauge (optional but recommended) - Zip ties (temporary holding)</p>
<p><strong>Procedure:</strong></p>
<ol type="1">
<li><p><strong>Route belt</strong> — Follow your path’s belt routing diagram</p>
<ul>
<li>Teeth face inward on pulleys</li>
<li>Avoid twists</li>
</ul></li>
<li><p><strong>Secure one end</strong> — Clamp or tie to carriage</p></li>
<li><p><strong>Pull through</strong> — Route around pulleys and idlers</p></li>
<li><p><strong>Initial tension:</strong></p>
<ul>
<li>Pull belt taut by hand</li>
<li>Secure second end</li>
<li>Belt should “twang” when plucked (like guitar string)</li>
</ul></li>
<li><p><strong>Measure tension</strong> (if gauge available):</p>
<ul>
<li>Target: 2-3 lbs (1-1.5 kg) deflection force</li>
<li>At mid-span, pressing ~10mm deflection</li>
</ul></li>
<li><p><strong>Final adjustment:</strong></p>
<ul>
<li>Too loose: sloppy motion, lost steps, ringing</li>
<li>Too tight: motor strain, bearing wear, noise</li>
<li>Just right: solid feel, clean motion, no ringing</li>
</ul></li>
</ol>
<p><strong>Check frequency:</strong> Monthly, or if print quality degrades</p>
<hr>
</section>
<section id="leadscrew-and-z-axis-setup" class="level3">
<h3 class="anchored" data-anchor-id="leadscrew-and-z-axis-setup">2.5 Leadscrew and Z-Axis Setup</h3>
<p><strong>Tools needed:</strong> - Level - Calipers or ruler - Anti-backlash nut (if equipped)</p>
<p><strong>Procedure:</strong></p>
<ol type="1">
<li><strong>Inspect leadscrews</strong> — Check for bends, damage, contamination
<ul>
<li>Roll on flat surface like smooth rods</li>
<li>Clean with IPA if dirty</li>
</ul></li>
<li><strong>Install anti-backlash nuts</strong> (if used):
<ul>
<li>Pre-load spring to manufacturer spec</li>
<li>Don’t over-tighten — causes binding</li>
</ul></li>
<li><strong>Couple to motors:</strong>
<ul>
<li>Use flexible couplers (not rigid)</li>
<li>Allow ~1mm axial play to prevent binding</li>
<li>Tighten set screws on motor shaft flat (if present)</li>
</ul></li>
<li><strong>Check alignment:</strong>
<ul>
<li>Leadscrew should spin freely when decoupled from bed</li>
<li>If binding when coupled, alignment is off</li>
</ul></li>
<li><strong>Lubricate:</strong>
<ul>
<li>Light grease (white lithium or PTFE)</li>
<li>Apply to threads, run up and down several times</li>
<li>Wipe excess</li>
</ul></li>
</ol>
<p><strong>Triple-Z specific:</strong> - All three leadscrews must be same length - Z-tilt calibration handles minor differences - Run Z_TILT_ADJUST after any Z-axis work</p>
<hr>
</section>
</section>
<section id="periodic-maintenance" class="level2">
<h2 class="anchored" data-anchor-id="periodic-maintenance">3. Periodic Maintenance</h2>
<section id="maintenance-schedule" class="level3">
<h3 class="anchored" data-anchor-id="maintenance-schedule">3.1 Maintenance Schedule</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Interval</th>
<th>Task</th>
<th>Applies To</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Weekly</td>
<td>Visual inspection</td>
<td>All</td>
</tr>
<tr class="even">
<td>Monthly</td>
<td>Belt tension check</td>
<td>All</td>
</tr>
<tr class="odd">
<td>Monthly</td>
<td>Eccentric nut check</td>
<td>Mill only</td>
</tr>
<tr class="even">
<td>Monthly</td>
<td>Clean V-slots</td>
<td>Mill only</td>
</tr>
<tr class="odd">
<td>3 months</td>
<td>Lubricate rods</td>
<td>Scaffold, Lathe</td>
</tr>
<tr class="even">
<td>3 months</td>
<td>Lubricate leadscrews</td>
<td>All</td>
</tr>
<tr class="odd">
<td>6 months</td>
<td>Check bearing play</td>
<td>Scaffold, Lathe</td>
</tr>
<tr class="even">
<td>6 months</td>
<td>Check wheel wear</td>
<td>Mill only</td>
</tr>
<tr class="odd">
<td>Annually</td>
<td>Full mechanical inspection</td>
<td>All</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="monthly-belt-tension-check" class="level3">
<h3 class="anchored" data-anchor-id="monthly-belt-tension-check">3.2 Monthly: Belt Tension Check</h3>
<p><strong>Signs belt needs attention:</strong> - Ringing artifacts in prints - Lost steps (layer shifts) - Clicking sounds during fast moves - Belt feels loose or too tight compared to initial setup</p>
<p><strong>Procedure:</strong> 1. Power off printer 2. Move carriage to mid-position 3. Pluck belt and listen to pitch - Compare to “reference pitch” you noted during setup - Or use tension gauge 4. Adjust tensioner if needed 5. Re-check after adjustment</p>
<hr>
</section>
<section id="monthly-eccentric-nut-check-mill" class="level3">
<h3 class="anchored" data-anchor-id="monthly-eccentric-nut-check-mill">3.3 Monthly: Eccentric Nut Check (Mill)</h3>
<p><strong>Signs adjustment needed:</strong> - Wobble in carriage (push side-to-side, check for play) - Wheels don’t spin freely - Uneven wheel wear - Print quality degradation</p>
<p><strong>Procedure:</strong> 1. Power off, move carriage to accessible position 2. Try to wobble carriage perpendicular to rail 3. If play detected, tighten eccentric slightly 4. If wheels don’t spin freely, loosen slightly 5. Re-test motion across full travel</p>
<hr>
</section>
<section id="quarterly-rod-lubrication-scaffold-lathe" class="level3">
<h3 class="anchored" data-anchor-id="quarterly-rod-lubrication-scaffold-lathe">3.4 Quarterly: Rod Lubrication (Scaffold, Lathe)</h3>
<p><strong>Lubricant options:</strong> - PTFE dry lubricant (preferred — doesn’t attract dust) - Light machine oil (3-in-1, sewing machine oil) - White lithium grease (sparingly, for harsh environments)</p>
<p><strong>Procedure:</strong> 1. Power off, move carriage to end of travel 2. Wipe rod with lint-free cloth (remove old lube and debris) 3. Apply small amount of lubricant to cloth 4. Wipe along rod — thin, even film 5. Move carriage back and forth several times 6. Wipe any excess that accumulates at bearings</p>
<p><strong>Warning:</strong> Over-lubrication attracts dust and creates gummy residue. Less is more.</p>
<hr>
</section>
<section id="quarterly-leadscrew-maintenance" class="level3">
<h3 class="anchored" data-anchor-id="quarterly-leadscrew-maintenance">3.5 Quarterly: Leadscrew Maintenance</h3>
<p><strong>Procedure:</strong> 1. Move bed to top of travel 2. Wipe visible leadscrew threads with cloth 3. Apply thin bead of PTFE grease or white lithium 4. Run bed up and down full travel 3-5 times 5. Wipe any excess that squeezes out</p>
<p><strong>For Triple-Z:</strong> - Service all three leadscrews - Run Z_TILT_ADJUST afterward</p>
<hr>
</section>
<section id="semi-annual-bearing-inspection-scaffold-lathe" class="level3">
<h3 class="anchored" data-anchor-id="semi-annual-bearing-inspection-scaffold-lathe">3.6 Semi-Annual: Bearing Inspection (Scaffold, Lathe)</h3>
<p><strong>Signs of bearing wear:</strong> - Clicking or crunching sounds - Rough motion (not smooth glide) - Visible play in carriage - Witness marks on rods (shiny wear tracks)</p>
<p><strong>Procedure:</strong> 1. Remove carriage from rods 2. Roll bearing by hand — should be smooth, not gritty 3. Inspect rod surface for wear tracks 4. If wear detected: - Rotate bearing 90° to use unworn section - Or replace bearing 5. If rod shows significant wear track: - Rotate rod 90° (if mounting allows) - Or replace rod</p>
<p><strong>IGUS bearings:</strong> May squeak when dry — this is normal initially. If squeaking persists, ensure rod is clean (no oil — IGUS runs dry).</p>
<hr>
</section>
<section id="semi-annual-wheel-inspection-mill" class="level3">
<h3 class="anchored" data-anchor-id="semi-annual-wheel-inspection-mill">3.7 Semi-Annual: Wheel Inspection (Mill)</h3>
<p><strong>Signs of wheel wear:</strong> - Flat spots (visible or felt as bumps during motion) - Grooves in wheel surface - Wheel doesn’t spin true (wobbles) - Increased play despite proper eccentric adjustment</p>
<p><strong>Procedure:</strong> 1. Remove carriage from rail 2. Inspect each wheel surface visually 3. Spin wheel by hand — should spin smoothly, no wobble 4. Check for flat spots by rotating slowly 5. Replace any worn wheels 6. Re-adjust eccentric nuts after reassembly</p>
<hr>
</section>
</section>
<section id="troubleshooting-common-issues" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-common-issues">4. Troubleshooting Common Issues</h2>
<section id="binding-or-stiff-motion" class="level3">
<h3 class="anchored" data-anchor-id="binding-or-stiff-motion">4.1 Binding or Stiff Motion</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Possible Cause</th>
<th>Check</th>
<th>Fix</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Misaligned rods/rails</td>
<td>Parallelism measurement</td>
<td>Re-align mounts</td>
</tr>
<tr class="even">
<td>Over-tight eccentric (Mill)</td>
<td>Wheel spin test</td>
<td>Loosen eccentric</td>
</tr>
<tr class="odd">
<td>Over-tight belt</td>
<td>Belt deflection</td>
<td>Loosen tensioner</td>
</tr>
<tr class="even">
<td>Dry bearings (rods)</td>
<td>Listen for squeaking</td>
<td>Lubricate</td>
</tr>
<tr class="odd">
<td>Bent rod</td>
<td>Roll on glass</td>
<td>Replace rod</td>
</tr>
<tr class="even">
<td>Debris in V-slot</td>
<td>Visual inspection</td>
<td>Clean groove</td>
</tr>
</tbody>
</table>
</section>
<section id="play-or-wobble" class="level3">
<h3 class="anchored" data-anchor-id="play-or-wobble">4.2 Play or Wobble</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 55%">
<col style="width: 25%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th>Possible Cause</th>
<th>Check</th>
<th>Fix</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Loose eccentric (Mill)</td>
<td>Wobble test</td>
<td>Tighten eccentric</td>
</tr>
<tr class="even">
<td>Worn bearings (rods)</td>
<td>Roll carriage, feel for play</td>
<td>Replace bearings</td>
</tr>
<tr class="odd">
<td>Worn wheels (Mill)</td>
<td>Visual + spin test</td>
<td>Replace wheels</td>
</tr>
<tr class="even">
<td>Loose belt</td>
<td>Pluck test</td>
<td>Tighten belt</td>
</tr>
<tr class="odd">
<td>Loose rod mounts</td>
<td>Wiggle rod holders</td>
<td>Tighten fasteners</td>
</tr>
</tbody>
</table>
</section>
<section id="noise-during-motion" class="level3">
<h3 class="anchored" data-anchor-id="noise-during-motion">4.3 Noise During Motion</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 26%">
<col style="width: 53%">
<col style="width: 19%">
</colgroup>
<thead>
<tr class="header">
<th>Sound</th>
<th>Likely Cause</th>
<th>Fix</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Clicking (rhythmic)</td>
<td>Flat spot on wheel</td>
<td>Replace wheel</td>
</tr>
<tr class="even">
<td>Grinding</td>
<td>Dry bearing or debris</td>
<td>Clean and lubricate</td>
</tr>
<tr class="odd">
<td>Squeaking (rods)</td>
<td>Dry LM8UU bearing</td>
<td>Lubricate</td>
</tr>
<tr class="even">
<td>Squeaking (IGUS)</td>
<td>Normal break-in OR contamination</td>
<td>Clean rod (no oil)</td>
</tr>
<tr class="odd">
<td>Whining</td>
<td>Belt too tight</td>
<td>Loosen tensioner</td>
</tr>
<tr class="even">
<td>Thumping</td>
<td>Loose pulley set screw</td>
<td>Tighten set screw</td>
</tr>
</tbody>
</table>
</section>
<section id="z-axis-issues" class="level3">
<h3 class="anchored" data-anchor-id="z-axis-issues">4.4 Z-Axis Issues</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 32%">
<col style="width: 50%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th>Symptom</th>
<th>Likely Cause</th>
<th>Fix</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Z binding</td>
<td>Misaligned leadscrew</td>
<td>Check coupler alignment</td>
</tr>
<tr class="even">
<td>Inconsistent layer height</td>
<td>Leadscrew backlash</td>
<td>Adjust anti-backlash nut</td>
</tr>
<tr class="odd">
<td>Z wobble (wavy walls)</td>
<td>Bent leadscrew</td>
<td>Replace leadscrew</td>
</tr>
<tr class="even">
<td>Z drift</td>
<td>Loose coupler</td>
<td>Tighten set screws</td>
</tr>
<tr class="odd">
<td>Bed tilt after homing</td>
<td>Z-tilt needs calibration</td>
<td>Run Z_TILT_ADJUST</td>
</tr>
</tbody>
</table>
<hr>
</section>
</section>
<section id="hotend-maintenance" class="level2">
<h2 class="anchored" data-anchor-id="hotend-maintenance">5. Hotend Maintenance</h2>
<section id="nozzle-changes" class="level3">
<h3 class="anchored" data-anchor-id="nozzle-changes">5.1 Nozzle Changes</h3>
<p><strong>Frequency:</strong> When switching materials, or if clogs occur</p>
<p><strong>Procedure:</strong> 1. Heat hotend to printing temp (or +20°C for stubborn clogs) 2. While hot, use wrench to loosen nozzle - Counter-hold heater block to prevent spinning 3. Remove nozzle completely 4. Inspect nozzle bore — replace if damaged or worn 5. Install new nozzle: - Thread in by hand until finger-tight - Heat to printing temp - Final tighten (1/4 turn with wrench)</p>
<p><strong>Warning:</strong> Always tighten nozzles hot. Cold-tightening leads to leaks.</p>
</section>
<section id="heat-break-maintenance" class="level3">
<h3 class="anchored" data-anchor-id="heat-break-maintenance">5.2 Heat Break Maintenance</h3>
<p><strong>Signs of issues:</strong> - Filament grinding in extruder - Heat creep (jams after running for a while) - Inconsistent extrusion</p>
<p><strong>Procedure:</strong> 1. Remove hotend from carriage 2. Heat to ~150°C, remove nozzle 3. Pull out heat break (may need heating/cooling cycles) 4. Clean inside with brass brush or drill bit (hand-turn only) 5. Inspect for damage — replace if bore is damaged 6. Apply thermal compound to threads (optional, helps heat transfer) 7. Reassemble and re-tighten nozzle hot</p>
<hr>
</section>
</section>
<section id="electronics-maintenance" class="level2">
<h2 class="anchored" data-anchor-id="electronics-maintenance">6. Electronics Maintenance</h2>
<section id="connection-checks" class="level3">
<h3 class="anchored" data-anchor-id="connection-checks">6.1 Connection Checks</h3>
<p><strong>Frequency:</strong> Annually, or if intermittent issues occur</p>
<p><strong>Procedure:</strong> 1. Power off and unplug 2. Inspect all connectors for: - Corrosion (green or white deposits) - Loose connections - Melted plastic (overheating) 3. Disconnect and reconnect each connector - This cleans contact surfaces 4. Check screw terminals: - Wires should be secure, not loose - No exposed wire outside terminal 5. Inspect stepper cables for damage (especially at flexing points)</p>
</section>
<section id="fan-cleaning" class="level3">
<h3 class="anchored" data-anchor-id="fan-cleaning">6.2 Fan Cleaning</h3>
<p><strong>Frequency:</strong> Every 3-6 months (dusty environment: monthly)</p>
<p><strong>Procedure:</strong> 1. Power off 2. Remove fan if accessible, or clean in place 3. Use compressed air to blow out dust - Hold fan blade to prevent spinning (generates voltage) 4. For heavy buildup, use soft brush 5. Reinstall and verify operation</p>
<hr>
</section>
</section>
<section id="documentation-records" class="level2">
<h2 class="anchored" data-anchor-id="documentation-records">7. Documentation &amp; Records</h2>
<section id="what-to-record" class="level3">
<h3 class="anchored" data-anchor-id="what-to-record">7.1 What to Record</h3>
<p>Keep a maintenance log with: - Date of maintenance - What was done - Parts replaced - Issues found - Measurements (belt tension, bearing play, etc.)</p>
</section>
<section id="why-it-matters" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters">7.2 Why It Matters</h3>
<ul>
<li>Tracks wear patterns — helps predict replacement timing</li>
<li>Documents what worked — useful for troubleshooting</li>
<li>Establishes baseline — “was it always like this?”</li>
</ul>
</section>
<section id="simple-log-format" class="level3">
<h3 class="anchored" data-anchor-id="simple-log-format">7.3 Simple Log Format</h3>
<pre><code>Date: 2026-01-15
Tasks: Monthly check
- Belt tension: good (no adjustment)
- Eccentric nuts: Y-axis slightly loose, tightened 1/8 turn
- Visual: no issues
Notes: None</code></pre>
<hr>
</section>
</section>
<section id="quick-reference-card" class="level2">
<h2 class="anchored" data-anchor-id="quick-reference-card">8. Quick Reference Card</h2>
<section id="weekly-30-seconds" class="level3">
<h3 class="anchored" data-anchor-id="weekly-30-seconds">Weekly (30 seconds)</h3>
<ul class="task-list">
<li><label><input type="checkbox">Visual check — nothing loose, no debris</label></li>
</ul>
</section>
<section id="monthly-5-minutes" class="level3">
<h3 class="anchored" data-anchor-id="monthly-5-minutes">Monthly (5 minutes)</h3>
<ul class="task-list">
<li><label><input type="checkbox">Belt tension — pluck test</label></li>
<li><label><input type="checkbox">Eccentric nuts (Mill) — wobble test</label></li>
<li><label><input type="checkbox">Clean build surface</label></li>
</ul>
</section>
<section id="quarterly-15-minutes" class="level3">
<h3 class="anchored" data-anchor-id="quarterly-15-minutes">Quarterly (15 minutes)</h3>
<ul class="task-list">
<li><label><input type="checkbox">Rod lubrication (Scaffold, Lathe)</label></li>
<li><label><input type="checkbox">Leadscrew lubrication</label></li>
<li><label><input type="checkbox">V-slot cleaning (Mill)</label></li>
</ul>
</section>
<section id="semi-annually-30-minutes" class="level3">
<h3 class="anchored" data-anchor-id="semi-annually-30-minutes">Semi-Annually (30 minutes)</h3>
<ul class="task-list">
<li><label><input type="checkbox">Bearing/wheel inspection</label></li>
<li><label><input type="checkbox">Connection check</label></li>
<li><label><input type="checkbox">Fan cleaning</label></li>
</ul>
</section>
<section id="annually-1-hour" class="level3">
<h3 class="anchored" data-anchor-id="annually-1-hour">Annually (1 hour)</h3>
<ul class="task-list">
<li><label><input type="checkbox">Full mechanical inspection</label></li>
<li><label><input type="checkbox">Replace wear items as needed</label></li>
<li><label><input type="checkbox">Recalibrate (Input Shaping, Z-tilt)</label></li>
</ul>
<hr>
<p><em>“A well-maintained tractor outlasts a neglected racecar.”</em></p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/theamalgam\.org");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>