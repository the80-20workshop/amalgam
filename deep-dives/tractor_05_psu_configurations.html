<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>tractor_05_psu_configurations – Amalgam</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5b4ad623e5705c0698d39aec6f10cf02.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Amalgam</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-guides" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Guides</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-guides">    
        <li>
    <a class="dropdown-item" href="../guides/index.html">
 <span class="dropdown-text">All Guides</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../guides/print-settings.html">
 <span class="dropdown-text">Print Settings &amp; Brand Guide</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../guides/frame-assembly.html">
 <span class="dropdown-text">Frame Assembly</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../guides/klipper-config.html">
 <span class="dropdown-text">Klipper Configuration</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../guides/calibration-guide.html">
 <span class="dropdown-text">Calibration Guide</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../guides/calibration-cheatsheet.html">
 <span class="dropdown-text">Calibration Cheatsheet</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../guides/maintenance-setup.html">
 <span class="dropdown-text">Maintenance &amp; Setup</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reference" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Reference</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-reference">    
        <li>
    <a class="dropdown-item" href="../reference/donor-printer-guide.html">
 <span class="dropdown-text">Donor Printer Guide</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../reference/MASTER_PARTS_LIST.html">
 <span class="dropdown-text">Master Parts List</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../reference/parts-sourcing-guide.html">
 <span class="dropdown-text">Parts Sourcing Guide</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../adr/index.html"> 
<span class="menu-text">ADRs</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-analysis" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Analysis</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-analysis">    
        <li>
    <a class="dropdown-item" href="../analysis/index.html">
 <span class="dropdown-text">Analysis Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../analysis/rod-sag-analysis.html">
 <span class="dropdown-text">Rod Sag Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../analysis/z-height-analysis.html">
 <span class="dropdown-text">Z-Height Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../analysis/single-vs-dual-rod.html">
 <span class="dropdown-text">Single vs Dual Rod</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../analysis/motion-system-comparison.html">
 <span class="dropdown-text">Motion System Comparison</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-deep-dives" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Deep Dives</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-deep-dives">    
        <li>
    <a class="dropdown-item" href="../deep-dives/index.html">
 <span class="dropdown-text">Deep Dives Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_00_decision_guide.html">
 <span class="dropdown-text">Decision Guide</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_01_frame_and_assembly.html">
 <span class="dropdown-text">Frame &amp; Assembly</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_02_xy_axis_system.html">
 <span class="dropdown-text">X-Y Axis System</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_03_motor_mounts_vibration.html">
 <span class="dropdown-text">Motor Mounts &amp; Vibration</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_04_xgantry_design_decision.html">
 <span class="dropdown-text">X-Gantry Design</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_05_psu_configurations.html">
 <span class="dropdown-text">PSU Configurations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../deep-dives/tractor_06_extruder_decision.html">
 <span class="dropdown-text">Extruder Decision</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-articles" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Articles</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-articles">    
        <li>
    <a class="dropdown-item" href="../articles/index.html">
 <span class="dropdown-text">All Articles</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../articles/age-of-the-appliance.html">
 <span class="dropdown-text">Age of the Appliance</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/core-engineering-truths.html">
 <span class="dropdown-text">Core Engineering Truths</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/reclaiming-the-reprap-legacy.html">
 <span class="dropdown-text">Reclaiming the RepRap Legacy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../articles/reconfiguration-of-3d-printing-market.html">
 <span class="dropdown-text">Reconfiguration of 3D Printing Market</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/the80-20workshop/amalgam"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../deep-dives/tractor_05_psu_configurations.html">Amalgam: Power Supply Configurations</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../deep-dives/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Deep Dives</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../deep-dives/tractor_00_decision_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Amalgam: Tier 0 Decision Guide</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../deep-dives/tractor_01_frame_and_assembly.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Tractor: Frame Design &amp; Assembly</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../deep-dives/tractor_02_xy_axis_system.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Tractor: X-Y Axis System</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../deep-dives/tractor_03_motor_mounts_vibration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Tractor: Motor Mounts &amp; Vibration Control</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../deep-dives/tractor_04_xgantry_design_decision.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Amalgam: X-Gantry Design Decision</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../deep-dives/tractor_05_psu_configurations.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Amalgam: Power Supply Configurations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../deep-dives/tractor_06_extruder_decision.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Amalgam: Extruder Selection &amp; Decision Record</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#amalgam-power-supply-configurations" id="toc-amalgam-power-supply-configurations" class="nav-link active" data-scroll-target="#amalgam-power-supply-configurations">Amalgam: Power Supply Configurations</a>
  <ul class="collapse">
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#power-budget-analysis" id="toc-power-budget-analysis" class="nav-link" data-scroll-target="#power-budget-analysis">Power Budget Analysis</a>
  <ul class="collapse">
  <li><a href="#component-power-requirements" id="toc-component-power-requirements" class="nav-link" data-scroll-target="#component-power-requirements">Component Power Requirements</a></li>
  <li><a href="#typical-scavenged-psu-ratings" id="toc-typical-scavenged-psu-ratings" class="nav-link" data-scroll-target="#typical-scavenged-psu-ratings">Typical Scavenged PSU Ratings</a></li>
  </ul></li>
  <li><a href="#critical-safety-warnings" id="toc-critical-safety-warnings" class="nav-link" data-scroll-target="#critical-safety-warnings">⚠️ CRITICAL SAFETY WARNINGS</a>
  <ul class="collapse">
  <li><a href="#the-voltage-trap-12v-vs-24v" id="toc-the-voltage-trap-12v-vs-24v" class="nav-link" data-scroll-target="#the-voltage-trap-12v-vs-24v">The Voltage Trap (12V vs 24V)</a></li>
  <li><a href="#capacitor-voltage-ratings" id="toc-capacitor-voltage-ratings" class="nav-link" data-scroll-target="#capacitor-voltage-ratings">Capacitor Voltage Ratings</a></li>
  </ul></li>
  <li><a href="#configuration-1-single-psu-simple" id="toc-configuration-1-single-psu-simple" class="nav-link" data-scroll-target="#configuration-1-single-psu-simple">Configuration 1: Single PSU (Simple)</a>
  <ul class="collapse">
  <li><a href="#when-this-works" id="toc-when-this-works" class="nav-link" data-scroll-target="#when-this-works">When This Works</a></li>
  <li><a href="#wiring-diagram" id="toc-wiring-diagram" class="nav-link" data-scroll-target="#wiring-diagram">Wiring Diagram</a></li>
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations">Limitations</a></li>
  </ul></li>
  <li><a href="#configuration-2-dual-psu-recommended" id="toc-configuration-2-dual-psu-recommended" class="nav-link" data-scroll-target="#configuration-2-dual-psu-recommended">Configuration 2: Dual PSU (Recommended)</a>
  <ul class="collapse">
  <li><a href="#why-dual-psu" id="toc-why-dual-psu" class="nav-link" data-scroll-target="#why-dual-psu">Why Dual PSU?</a></li>
  <li><a href="#the-three-golden-rules" id="toc-the-three-golden-rules" class="nav-link" data-scroll-target="#the-three-golden-rules">The Three Golden Rules</a></li>
  <li><a href="#dual-psu-wiring-diagram" id="toc-dual-psu-wiring-diagram" class="nav-link" data-scroll-target="#dual-psu-wiring-diagram">Dual PSU Wiring Diagram</a></li>
  <li><a href="#recommended-load-distribution" id="toc-recommended-load-distribution" class="nav-link" data-scroll-target="#recommended-load-distribution">Recommended Load Distribution</a></li>
  </ul></li>
  <li><a href="#configuration-3-mixed-voltage-12v-24v" id="toc-configuration-3-mixed-voltage-12v-24v" class="nav-link" data-scroll-target="#configuration-3-mixed-voltage-12v-24v">Configuration 3: Mixed Voltage (12V + 24V)</a>
  <ul class="collapse">
  <li><a href="#when-this-is-necessary" id="toc-when-this-is-necessary" class="nav-link" data-scroll-target="#when-this-is-necessary">When This Is Necessary</a></li>
  <li><a href="#the-external-mosfet-solution" id="toc-the-external-mosfet-solution" class="nav-link" data-scroll-target="#the-external-mosfet-solution">The External MOSFET Solution</a></li>
  <li><a href="#external-mosfet-notes" id="toc-external-mosfet-notes" class="nav-link" data-scroll-target="#external-mosfet-notes">External MOSFET Notes</a></li>
  <li><a href="#do-not-use-software-pwm-limiting" id="toc-do-not-use-software-pwm-limiting" class="nav-link" data-scroll-target="#do-not-use-software-pwm-limiting">⚠️ Do NOT Use Software PWM Limiting</a></li>
  </ul></li>
  <li><a href="#configuration-4-server-psu-scavenge" id="toc-configuration-4-server-psu-scavenge" class="nav-link" data-scroll-target="#configuration-4-server-psu-scavenge">Configuration 4: Server PSU Scavenge</a>
  <ul class="collapse">
  <li><a href="#the-free-power-option" id="toc-the-free-power-option" class="nav-link" data-scroll-target="#the-free-power-option">The “Free Power” Option</a></li>
  <li><a href="#server-psu-characteristics" id="toc-server-psu-characteristics" class="nav-link" data-scroll-target="#server-psu-characteristics">Server PSU Characteristics</a></li>
  <li><a href="#the-12v-limitation" id="toc-the-12v-limitation" class="nav-link" data-scroll-target="#the-12v-limitation">The 12V Limitation</a></li>
  <li><a href="#series-connection-for-24v" id="toc-series-connection-for-24v" class="nav-link" data-scroll-target="#series-connection-for-24v">Series Connection for 24V</a></li>
  </ul></li>
  <li><a href="#usb-back-powering-prevention" id="toc-usb-back-powering-prevention" class="nav-link" data-scroll-target="#usb-back-powering-prevention">USB Back-Powering Prevention</a>
  <ul class="collapse">
  <li><a href="#the-problem" id="toc-the-problem" class="nav-link" data-scroll-target="#the-problem">The Problem</a></li>
  <li><a href="#the-fix-5v-pin-tape-trick" id="toc-the-fix-5v-pin-tape-trick" class="nav-link" data-scroll-target="#the-fix-5v-pin-tape-trick">The Fix: 5V Pin Tape Trick</a></li>
  </ul></li>
  <li><a href="#wiring-best-practices" id="toc-wiring-best-practices" class="nav-link" data-scroll-target="#wiring-best-practices">Wiring Best Practices</a>
  <ul class="collapse">
  <li><a href="#ferrules-are-mandatory" id="toc-ferrules-are-mandatory" class="nav-link" data-scroll-target="#ferrules-are-mandatory">Ferrules Are Mandatory</a></li>
  <li><a href="#wire-gauge-guidelines" id="toc-wire-gauge-guidelines" class="nav-link" data-scroll-target="#wire-gauge-guidelines">Wire Gauge Guidelines</a></li>
  <li><a href="#earthground-safety" id="toc-earthground-safety" class="nav-link" data-scroll-target="#earthground-safety">Earth/Ground Safety</a></li>
  </ul></li>
  <li><a href="#klipper-multi-mcu-configuration" id="toc-klipper-multi-mcu-configuration" class="nav-link" data-scroll-target="#klipper-multi-mcu-configuration">Klipper Multi-MCU Configuration</a>
  <ul class="collapse">
  <li><a href="#basic-dual-board-setup" id="toc-basic-dual-board-setup" class="nav-link" data-scroll-target="#basic-dual-board-setup">Basic Dual-Board Setup</a></li>
  <li><a href="#pin-addressing" id="toc-pin-addressing" class="nav-link" data-scroll-target="#pin-addressing">Pin Addressing</a></li>
  <li><a href="#timing-synchronization" id="toc-timing-synchronization" class="nav-link" data-scroll-target="#timing-synchronization">Timing Synchronization</a></li>
  </ul></li>
  <li><a href="#pre-power-checklist" id="toc-pre-power-checklist" class="nav-link" data-scroll-target="#pre-power-checklist">Pre-Power Checklist</a>
  <ul class="collapse">
  <li><a href="#voltage-verification" id="toc-voltage-verification" class="nav-link" data-scroll-target="#voltage-verification">Voltage Verification</a></li>
  <li><a href="#wiring-verification" id="toc-wiring-verification" class="nav-link" data-scroll-target="#wiring-verification">Wiring Verification</a></li>
  <li><a href="#safety-verification" id="toc-safety-verification" class="nav-link" data-scroll-target="#safety-verification">Safety Verification</a></li>
  <li><a href="#smoke-test-procedure" id="toc-smoke-test-procedure" class="nav-link" data-scroll-target="#smoke-test-procedure">Smoke Test Procedure</a></li>
  </ul></li>
  <li><a href="#troubleshooting" id="toc-troubleshooting" class="nav-link" data-scroll-target="#troubleshooting">Troubleshooting</a>
  <ul class="collapse">
  <li><a href="#symptom-usb-disconnects-randomly" id="toc-symptom-usb-disconnects-randomly" class="nav-link" data-scroll-target="#symptom-usb-disconnects-randomly">Symptom: USB Disconnects Randomly</a></li>
  <li><a href="#symptom-heated-bed-heats-slowly" id="toc-symptom-heated-bed-heats-slowly" class="nav-link" data-scroll-target="#symptom-heated-bed-heats-slowly">Symptom: Heated Bed Heats Slowly</a></li>
  <li><a href="#symptom-steppers-skip-or-lose-position" id="toc-symptom-steppers-skip-or-lose-position" class="nav-link" data-scroll-target="#symptom-steppers-skip-or-lose-position">Symptom: Steppers Skip or Lose Position</a></li>
  <li><a href="#symptom-board-wont-power-on" id="toc-symptom-board-wont-power-on" class="nav-link" data-scroll-target="#symptom-board-wont-power-on">Symptom: Board Won’t Power On</a></li>
  </ul></li>
  <li><a href="#summary-recommended-configuration" id="toc-summary-recommended-configuration" class="nav-link" data-scroll-target="#summary-recommended-configuration">Summary: Recommended Configuration</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="amalgam-power-supply-configurations" class="level1">
<h1>Amalgam: Power Supply Configurations</h1>
<p>⚠️ <strong>Outdated Tier System:</strong> This document uses the old Tier 0/1/2/3 framework and explores multi-PSU configurations. <strong>Current canonical decisions are in:</strong> - <strong>ADR-012</strong>: Mainboard &amp; Host Architecture (electronics configuration) - <strong>ADR-016</strong>: Electronics &amp; PSU Mounting Strategy - <strong>docs/reference/MASTER_PARTS_LIST.md</strong> (current PSU specs per configuration)</p>
<p>With the simplified two-donor model (ADR-025), most builds use scavenged PSUs; refer to current BOM for accurate specs.</p>
<hr>
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>Amalgam requires power for seven stepper motors (1×X, 2×Y, 3×Z, 1×E), a hotend, heated bed, control boards, and cooling fans. A single scavenged PSU from a donor printer (typically 150W–250W) is often insufficient. This document covers safe configurations for single and dual PSU setups.</p>
<hr>
</section>
<section id="power-budget-analysis" class="level2">
<h2 class="anchored" data-anchor-id="power-budget-analysis">Power Budget Analysis</h2>
<section id="component-power-requirements" class="level3">
<h3 class="anchored" data-anchor-id="component-power-requirements">Component Power Requirements</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Component</th>
<th>Power Draw</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Control Boards (×2)</td>
<td>~10W</td>
<td>Logic, drivers idle</td>
</tr>
<tr class="even">
<td>Cooling Fans</td>
<td>~10W</td>
<td>Hotend, part cooling, electronics</td>
</tr>
<tr class="odd">
<td>Stepper Motors (×7)</td>
<td>~70W</td>
<td>Peak during rapid moves</td>
</tr>
<tr class="even">
<td>Hotend (E3D V6)</td>
<td>40W</td>
<td>40W heater cartridge</td>
</tr>
<tr class="odd">
<td>Heated Bed (235×235)</td>
<td>150W–220W</td>
<td>Largest single load</td>
</tr>
<tr class="even">
<td><strong>Total</strong></td>
<td><strong>~280W–350W</strong></td>
<td>At full operation</td>
</tr>
</tbody>
</table>
</section>
<section id="typical-scavenged-psu-ratings" class="level3">
<h3 class="anchored" data-anchor-id="typical-scavenged-psu-ratings">Typical Scavenged PSU Ratings</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Donor Printer</th>
<th>Voltage</th>
<th>Wattage</th>
<th>Sufficient?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Anet A8</td>
<td>12V</td>
<td>240W</td>
<td>❌ No (12V system)</td>
</tr>
<tr class="even">
<td>Ender 3 (original)</td>
<td>24V</td>
<td>270W</td>
<td>⚠️ Marginal</td>
</tr>
<tr class="odd">
<td>Ender 3 Pro/V2</td>
<td>24V</td>
<td>350W</td>
<td>✅ Yes (barely)</td>
</tr>
<tr class="even">
<td>Prusa MK2</td>
<td>12V</td>
<td>240W</td>
<td>❌ No (12V system)</td>
</tr>
<tr class="odd">
<td>Prusa MK3</td>
<td>24V</td>
<td>240W</td>
<td>⚠️ Marginal</td>
</tr>
<tr class="even">
<td>CR-10</td>
<td>12V/24V</td>
<td>360W–500W</td>
<td>✅ Yes (check voltage)</td>
</tr>
</tbody>
</table>
<p><strong>Conclusion:</strong> Most single scavenged PSUs are marginal or insufficient. Dual PSU configuration is recommended.</p>
<hr>
</section>
</section>
<section id="critical-safety-warnings" class="level2">
<h2 class="anchored" data-anchor-id="critical-safety-warnings">⚠️ CRITICAL SAFETY WARNINGS</h2>
<section id="the-voltage-trap-12v-vs-24v" class="level3">
<h3 class="anchored" data-anchor-id="the-voltage-trap-12v-vs-24v">The Voltage Trap (12V vs 24V)</h3>
<p><strong>This is the most dangerous mistake in scavenger builds.</strong></p>
<p>If your donor printer is older (Prusa MK2, Anet A8, early CR-10), it likely uses a <strong>12V system</strong>.</p>
<p><strong>The Danger:</strong> Connecting a 12V component to 24V doesn’t double the power—it <strong>quadruples</strong> it.</p>
<pre><code>Power = Voltage² / Resistance

12V bed at 12V: P = 144/R = 150W (normal)
12V bed at 24V: P = 576/R = 600W (FIRE HAZARD)</code></pre>
<p><strong>What Will Happen:</strong> - Connectors will melt - MOSFETs will explode - Heating traces may crack and arc - <strong>Fire is likely</strong></p>
<p><strong>Before Connecting Anything:</strong> 1. Check labels on heated bed (underside) 2. Check capacitor voltage ratings on boards 3. If it says “12V” → Do NOT connect to 24V PSU</p>
</section>
<section id="capacitor-voltage-ratings" class="level3">
<h3 class="anchored" data-anchor-id="capacitor-voltage-ratings">Capacitor Voltage Ratings</h3>
<p>Scavenged control boards have electrolytic capacitors (cylindrical components).</p>
<p><strong>The Check:</strong> Look at the voltage rating printed on the capacitor. - If it says “16V” → Will explode on 24V - If it says “25V” or “35V” → Safe for 24V</p>
<p><strong>If capacitors are underrated:</strong> Replace them or use that board only with a 12V PSU.</p>
<hr>
</section>
</section>
<section id="configuration-1-single-psu-simple" class="level2">
<h2 class="anchored" data-anchor-id="configuration-1-single-psu-simple">Configuration 1: Single PSU (Simple)</h2>
<section id="when-this-works" class="level3">
<h3 class="anchored" data-anchor-id="when-this-works">When This Works</h3>
<ul>
<li>PSU is 350W+ at 24V</li>
<li>Heated bed is 24V compatible</li>
<li>All components match PSU voltage</li>
</ul>
</section>
<section id="wiring-diagram" class="level3">
<h3 class="anchored" data-anchor-id="wiring-diagram">Wiring Diagram</h3>
<pre><code>┌─────────────────────────────────────────────────┐
│                 MAINS AC INPUT                   │
│            [Fused IEC Inlet + Switch]            │
└─────────────────────┬───────────────────────────┘
                      │
                      ▼
              ┌───────────────┐
              │    PSU 24V    │
              │    350W+      │
              └───┬───────┬───┘
                  │       │
               (+24V)   (GND)
                  │       │
       ┌──────────┴───────┴──────────┐
       │                             │
       ▼                             ▼
┌─────────────┐              ┌─────────────┐
│   Board 1   │──── USB ────│   Board 2   │
│ (X,Y1,Y2,E) │              │ (Z1,Z2,Z3)  │
└─────────────┘              └─────────────┘
       │                             │
       ▼                             ▼
   [Hotend]                     [Heatbed]
   [Fans]                       [Z-Motors]</code></pre>
</section>
<section id="limitations" class="level3">
<h3 class="anchored" data-anchor-id="limitations">Limitations</h3>
<ul>
<li>Single point of failure</li>
<li>May brownout during bed heating + rapid moves</li>
<li>Limited upgrade path</li>
</ul>
<hr>
</section>
</section>
<section id="configuration-2-dual-psu-recommended" class="level2">
<h2 class="anchored" data-anchor-id="configuration-2-dual-psu-recommended">Configuration 2: Dual PSU (Recommended)</h2>
<section id="why-dual-psu" class="level3">
<h3 class="anchored" data-anchor-id="why-dual-psu">Why Dual PSU?</h3>
<ol type="1">
<li><strong>Load Distribution:</strong> Each PSU handles a manageable load</li>
<li><strong>Isolation:</strong> Electrical noise from bed heater separated from motion system</li>
<li><strong>Redundancy:</strong> If one PSU is marginal, the other compensates</li>
<li><strong>Scavenger Reality:</strong> Two 200W PSUs are easier to find than one 400W</li>
</ol>
</section>
<section id="the-three-golden-rules" class="level3">
<h3 class="anchored" data-anchor-id="the-three-golden-rules">The Three Golden Rules</h3>
<section id="rule-1-common-dc-ground-mandatory" class="level4">
<h4 class="anchored" data-anchor-id="rule-1-common-dc-ground-mandatory">Rule 1: Common DC Ground (MANDATORY)</h4>
<p>Both control boards must share the same reference for “zero volts.”</p>
<p><strong>The Problem:</strong> Without common ground, the “0V” on Board A might be 0.5V different from Board B. This causes: - USB communication errors - Data corruption - Potential damage to Raspberry Pi USB ports</p>
<p><strong>The Fix:</strong> Run a thick wire (14–16 AWG) between the Negative (−V or COM) terminals of both PSUs.</p>
<pre><code>PSU 1 [-V] ════════════════════ PSU 2 [-V]
              (Common Ground)</code></pre>
</section>
<section id="rule-2-never-parallel-the-positives-critical" class="level4">
<h4 class="anchored" data-anchor-id="rule-2-never-parallel-the-positives-critical">Rule 2: Never Parallel the Positives (CRITICAL)</h4>
<p><strong>NEVER connect the +V terminals of two PSUs together.</strong></p>
<p><strong>Why:</strong> No two PSUs output exactly the same voltage. - PSU 1 might output 24.1V - PSU 2 might output 23.9V</p>
<p>If connected, they will “fight”—the higher voltage PSU tries to charge the lower one. This causes: - Excessive current flow between PSUs - Overheating - PSU failure - Potential fire</p>
<p><strong>The Fix:</strong> Keep positive circuits completely isolated. - Board A gets +V ONLY from PSU 1 - Board B gets +V ONLY from PSU 2</p>
</section>
<section id="rule-3-single-ac-switch-safety" class="level4">
<h4 class="anchored" data-anchor-id="rule-3-single-ac-switch-safety">Rule 3: Single AC Switch (SAFETY)</h4>
<p>Both PSUs must turn on and off together.</p>
<p><strong>The Risk:</strong> If one PSU is on and the other is off while the printer tries to move: - “Back-powering” through stepper motors - Control board damage - Unpredictable behavior</p>
<p><strong>The Fix:</strong> Wire both PSUs to a single fused AC inlet and power switch.</p>
</section>
</section>
<section id="dual-psu-wiring-diagram" class="level3">
<h3 class="anchored" data-anchor-id="dual-psu-wiring-diagram">Dual PSU Wiring Diagram</h3>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│                      MAINS AC INPUT                          │
│               [Fused IEC Inlet + Switch]                     │
│                    [Emergency Stop]                          │
└─────────────────────────┬───────────────────────────────────┘
                          │
            ┌─────────────┴─────────────┐
            │     Terminal Block        │
            │   (Live/Neutral Split)    │
            └─────┬───────────────┬─────┘
                  │               │
                  ▼               ▼
          ┌───────────┐   ┌───────────┐
          │   PSU 1   │   │   PSU 2   │
          │   24V     │   │   24V     │
          └─┬───────┬─┘   └─┬───────┬─┘
            │       │       │       │
         (+24V)  (GND)   (+24V)  (GND)
            │       │       │       │
            │       └───────┴───────┤  ← COMMON GROUND
            │           ║           │
            │           ║           │
    ┌───────┴───┐       ║       ┌───┴───────┐
    │  Board 1  │       ║       │  Board 2  │
    │(X,Y1,Y2,E)│       ║       │(Z1,Z2,Z3) │
    └─────┬─────┘       ║       └─────┬─────┘
          │             ║             │
          ▼             ║             ▼
      [Hotend]          ║         [Heatbed]
      [Fans]            ║         [Z-Motors]
                        ║
              (Common Ground Bus)

    ⚠️ +24V lines NEVER connected between PSUs</code></pre>
</section>
<section id="recommended-load-distribution" class="level3">
<h3 class="anchored" data-anchor-id="recommended-load-distribution">Recommended Load Distribution</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 20%">
<col style="width: 34%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>PSU</th>
<th>Board</th>
<th>Components</th>
<th>Rationale</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>PSU 1</td>
<td>Board 1</td>
<td>X, Y1, Y2, Extruder, Hotend, Fans</td>
<td>“Fast” motion, lower power</td>
</tr>
<tr class="even">
<td>PSU 2</td>
<td>Board 2</td>
<td>Z1, Z2, Z3, Heatbed</td>
<td>“Slow” motion, high power</td>
</tr>
</tbody>
</table>
<p><strong>Why This Split:</strong> - Heatbed electrical noise isolated from X/Y signals - High-current bed circuit on dedicated PSU - Z-motors move slowly, less sensitive to noise</p>
<hr>
</section>
</section>
<section id="configuration-3-mixed-voltage-12v-24v" class="level2">
<h2 class="anchored" data-anchor-id="configuration-3-mixed-voltage-12v-24v">Configuration 3: Mixed Voltage (12V + 24V)</h2>
<section id="when-this-is-necessary" class="level3">
<h3 class="anchored" data-anchor-id="when-this-is-necessary">When This Is Necessary</h3>
<ul>
<li>One donor is 12V (older printer)</li>
<li>One donor is 24V (newer printer)</li>
<li>You have a 12V heated bed</li>
</ul>
</section>
<section id="the-external-mosfet-solution" class="level3">
<h3 class="anchored" data-anchor-id="the-external-mosfet-solution">The External MOSFET Solution</h3>
<p>Use the 12V PSU exclusively for the heated bed, controlled by an external MOSFET triggered by the 24V board.</p>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│                      MAINS AC INPUT                          │
│               [Fused IEC Inlet + Switch]                     │
└─────────────────────────┬───────────────────────────────────┘
                          │
            ┌─────────────┴─────────────┐
            │                           │
            ▼                           ▼
    ┌───────────────┐           ┌───────────────┐
    │    PSU 1      │           │    PSU 2      │
    │    24V        │           │    12V        │
    └───┬───────┬───┘           └───┬───────┬───┘
        │       │                   │       │
     (+24V)  (GND)               (+12V)  (GND)
        │       │                   │       │
        │       └───────────────────┴───────┤  ← COMMON GROUND
        │                   ║               │
        ▼                   ║               ▼
┌─────────────┐             ║       ┌───────────────┐
│   Board 1   │─────────────╫──────→│ External      │
│  (All MCU)  │  Signal     ║       │ MOSFET        │
└─────────────┘  (3.3V)     ║       └───────┬───────┘
        │                   ║               │
        ▼                   ║               ▼
    [Hotend]                ║         [12V Heatbed]
    [Steppers]              ║
    [Fans]                  ║
                            ║
                  (Common Ground Bus)</code></pre>
</section>
<section id="external-mosfet-notes" class="level3">
<h3 class="anchored" data-anchor-id="external-mosfet-notes">External MOSFET Notes</h3>
<ul>
<li>Cost: ~$5–10 (HA210N06 module or similar)</li>
<li>Triggered by low-current signal from main board</li>
<li>Switches high-current 12V to bed</li>
<li><strong>Must share common ground with 24V system</strong></li>
</ul>
</section>
<section id="do-not-use-software-pwm-limiting" class="level3">
<h3 class="anchored" data-anchor-id="do-not-use-software-pwm-limiting">⚠️ Do NOT Use Software PWM Limiting</h3>
<p>Some guides suggest using <code>max_power: 0.25</code> in Klipper to run a 12V bed on 24V.</p>
<p><strong>Why This Is Dangerous:</strong> - If Klipper crashes with the pin HIGH, bed goes to 400% power - No hardware protection - Fire risk</p>
<p><strong>Always use hardware voltage matching, not software limiting.</strong></p>
<hr>
</section>
</section>
<section id="configuration-4-server-psu-scavenge" class="level2">
<h2 class="anchored" data-anchor-id="configuration-4-server-psu-scavenge">Configuration 4: Server PSU Scavenge</h2>
<section id="the-free-power-option" class="level3">
<h3 class="anchored" data-anchor-id="the-free-power-option">The “Free Power” Option</h3>
<p>Server PSUs from old HP, Dell, or IBM rack servers are often available free from e-waste centers.</p>
<p><strong>Common Types:</strong> - HP “Common Slot” PSUs (750W–1200W) - Dell PowerEdge PSUs (500W–1100W)</p>
</section>
<section id="server-psu-characteristics" class="level3">
<h3 class="anchored" data-anchor-id="server-psu-characteristics">Server PSU Characteristics</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Feature</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Voltage</td>
<td>12V DC</td>
<td>Single rail, high current</td>
</tr>
<tr class="even">
<td>Power</td>
<td>500W–1200W</td>
<td>Massive headroom</td>
</tr>
<tr class="odd">
<td>Efficiency</td>
<td>80%+ (Gold/Platinum)</td>
<td>Low heat, quiet</td>
</tr>
<tr class="even">
<td>Cost</td>
<td>Free–$20</td>
<td>E-waste goldmine</td>
</tr>
</tbody>
</table>
</section>
<section id="the-12v-limitation" class="level3">
<h3 class="anchored" data-anchor-id="the-12v-limitation">The 12V Limitation</h3>
<p>Server PSUs output 12V, but Amalgam prefers 24V.</p>
<p><strong>Options:</strong></p>
<ol type="1">
<li><strong>Use 12V System:</strong> If all your components are 12V compatible</li>
<li><strong>Series Two PSUs:</strong> Connect two 12V PSUs in series for 24V</li>
<li><strong>DC-DC Boost:</strong> Use a boost converter (less efficient)</li>
</ol>
</section>
<section id="series-connection-for-24v" class="level3">
<h3 class="anchored" data-anchor-id="series-connection-for-24v">Series Connection for 24V</h3>
<pre><code>┌─────────────┐      ┌─────────────┐
│  Server     │      │  Server     │
│  PSU 1      │      │  PSU 2      │
│  12V        │      │  12V        │
└──┬──────┬───┘      └──┬──────┬───┘
   │      │             │      │
(+12V)  (GND)        (+12V)  (GND)
   │      │             │      │
   │      └─────────────┘      │
   │            │              │
   │        (JOINED)           │
   │      This becomes         │
   │      the "middle"         │
   │                           │
   ▼                           ▼
(+24V)                       (GND)
   │                           │
   └─────── TO PRINTER ────────┘</code></pre>
<p><strong>Critical:</strong> The “joined” point (PSU1 GND to PSU2 +12V) must be isolated from chassis ground.</p>
<hr>
</section>
</section>
<section id="usb-back-powering-prevention" class="level2">
<h2 class="anchored" data-anchor-id="usb-back-powering-prevention">USB Back-Powering Prevention</h2>
<section id="the-problem" class="level3">
<h3 class="anchored" data-anchor-id="the-problem">The Problem</h3>
<p>When control boards are connected to the Klipper host (Raspberry Pi) via USB, the USB cable can try to power the board through the 5V pin.</p>
<p><strong>The Risk:</strong> - If PSUs are off but Pi is on, board draws power through USB - USB traces are rated for ~500mA, boards may try to draw more - Can fry the Pi’s USB port or the board’s voltage regulator</p>
</section>
<section id="the-fix-5v-pin-tape-trick" class="level3">
<h3 class="anchored" data-anchor-id="the-fix-5v-pin-tape-trick">The Fix: 5V Pin Tape Trick</h3>
<ol type="1">
<li>Look inside the USB-A connector (the end that plugs into Pi)</li>
<li>Identify the 5V pin (usually leftmost or rightmost, red wire)</li>
<li>Place a small piece of electrical tape over just that pin</li>
<li>Data pins (D+ and D−) remain connected</li>
</ol>
<pre><code>USB-A Connector Pin Layout:
┌─────────────────────┐
│  [5V] [D-] [D+] [GND]  │
│   ▲                    │
│   │                    │
│  TAPE THIS PIN         │
└─────────────────────────┘</code></pre>
<p><strong>Alternative:</strong> Some boards have a jumper to disable USB power input—check your board’s documentation.</p>
<hr>
</section>
</section>
<section id="wiring-best-practices" class="level2">
<h2 class="anchored" data-anchor-id="wiring-best-practices">Wiring Best Practices</h2>
<section id="ferrules-are-mandatory" class="level3">
<h3 class="anchored" data-anchor-id="ferrules-are-mandatory">Ferrules Are Mandatory</h3>
<p>Scavenged wires are often: - Brittle from age - Frayed at the ends - Prone to loose strands</p>
<p><strong>The Risk:</strong> A loose strand can bridge terminals, causing shorts, arcing, or fire.</p>
<p><strong>The Fix:</strong> Use crimped ferrules on every wire going into a screw terminal.</p>
<ul>
<li>Ferrule crimping kit: ~$15–25</li>
<li>Prevents strand separation</li>
<li>Creates secure, repeatable connections</li>
</ul>
</section>
<section id="wire-gauge-guidelines" class="level3">
<h3 class="anchored" data-anchor-id="wire-gauge-guidelines">Wire Gauge Guidelines</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Circuit</th>
<th>Minimum Gauge</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Heated Bed</td>
<td>14 AWG</td>
<td>High current, longest run</td>
</tr>
<tr class="even">
<td>Hotend</td>
<td>18 AWG</td>
<td>Moderate current</td>
</tr>
<tr class="odd">
<td>Stepper Motors</td>
<td>22 AWG</td>
<td>Low current</td>
</tr>
<tr class="even">
<td>Logic/Signals</td>
<td>24 AWG</td>
<td>Very low current</td>
</tr>
<tr class="odd">
<td>Common Ground (Dual PSU)</td>
<td>14–16 AWG</td>
<td>Must handle fault current</td>
</tr>
</tbody>
</table>
</section>
<section id="earthground-safety" class="level3">
<h3 class="anchored" data-anchor-id="earthground-safety">Earth/Ground Safety</h3>
<p><strong>Mains Earth (Green/Yellow) must be connected to:</strong> - Metal frame of both PSUs - Metal frame of printer (if any) - Heated bed frame (if metal)</p>
<p><strong>This protects you if a wire shorts to the frame.</strong></p>
<hr>
</section>
</section>
<section id="klipper-multi-mcu-configuration" class="level2">
<h2 class="anchored" data-anchor-id="klipper-multi-mcu-configuration">Klipper Multi-MCU Configuration</h2>
<section id="basic-dual-board-setup" class="level3">
<h3 class="anchored" data-anchor-id="basic-dual-board-setup">Basic Dual-Board Setup</h3>
<p>In <code>printer.cfg</code>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode ini code-with-copy"><code class="sourceCode ini"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[mcu]</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="dt">serial: /dev/serial/by-id/usb-board_1_xxxxx</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">[mcu aux]</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="dt">serial: /dev/serial/by-id/usb-board_2_xxxxx</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="pin-addressing" class="level3">
<h3 class="anchored" data-anchor-id="pin-addressing">Pin Addressing</h3>
<p>For the primary MCU:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode ini code-with-copy"><code class="sourceCode ini"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[stepper_x]</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="dt">step_pin: PB13</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>For the secondary MCU:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode ini code-with-copy"><code class="sourceCode ini"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[stepper_z]</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="dt">step_pin: aux:PB13</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="timing-synchronization" class="level3">
<h3 class="anchored" data-anchor-id="timing-synchronization">Timing Synchronization</h3>
<p>Klipper automatically synchronizes timing between MCUs. The common ground connection is essential for this to work reliably.</p>
<hr>
</section>
</section>
<section id="pre-power-checklist" class="level2">
<h2 class="anchored" data-anchor-id="pre-power-checklist">Pre-Power Checklist</h2>
<p>Before turning on your Amalgam for the first time:</p>
<section id="voltage-verification" class="level3">
<h3 class="anchored" data-anchor-id="voltage-verification">Voltage Verification</h3>
<ul class="task-list">
<li><label><input type="checkbox">Check heated bed voltage rating (12V or 24V)</label></li>
<li><label><input type="checkbox">Check capacitor voltage ratings on all boards</label></li>
<li><label><input type="checkbox">Verify all components match PSU voltage</label></li>
</ul>
</section>
<section id="wiring-verification" class="level3">
<h3 class="anchored" data-anchor-id="wiring-verification">Wiring Verification</h3>
<ul class="task-list">
<li><label><input type="checkbox">Common ground connected between PSUs (if dual)</label></li>
<li><label><input type="checkbox">Positive rails are isolated (never paralleled)</label></li>
<li><label><input type="checkbox">All ferrules crimped properly</label></li>
<li><label><input type="checkbox">No loose strands visible</label></li>
<li><label><input type="checkbox">Earth connected to frames</label></li>
</ul>
</section>
<section id="safety-verification" class="level3">
<h3 class="anchored" data-anchor-id="safety-verification">Safety Verification</h3>
<ul class="task-list">
<li><label><input type="checkbox">Single AC switch controls all PSUs</label></li>
<li><label><input type="checkbox">Fused inlet installed</label></li>
<li><label><input type="checkbox">USB 5V pins taped (if needed)</label></li>
<li><label><input type="checkbox">Emergency stop accessible</label></li>
</ul>
</section>
<section id="smoke-test-procedure" class="level3">
<h3 class="anchored" data-anchor-id="smoke-test-procedure">Smoke Test Procedure</h3>
<ol type="1">
<li>Connect PSU(s) to mains, switch OFF</li>
<li>Turn on—listen for capacitor charging (brief hum is normal)</li>
<li>Check for smoke, burning smell, or sparks</li>
<li>Measure output voltages with multimeter</li>
<li>Verify common ground with continuity test</li>
<li>Connect boards one at a time</li>
<li>Power cycle between each connection</li>
</ol>
<hr>
</section>
</section>
<section id="troubleshooting" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting">Troubleshooting</h2>
<section id="symptom-usb-disconnects-randomly" class="level3">
<h3 class="anchored" data-anchor-id="symptom-usb-disconnects-randomly">Symptom: USB Disconnects Randomly</h3>
<p><strong>Likely Cause:</strong> Common ground not connected or poor connection</p>
<p><strong>Fix:</strong> - Verify thick wire between PSU negatives - Check for corrosion on terminals - Use star-ground topology if multiple grounds</p>
</section>
<section id="symptom-heated-bed-heats-slowly" class="level3">
<h3 class="anchored" data-anchor-id="symptom-heated-bed-heats-slowly">Symptom: Heated Bed Heats Slowly</h3>
<p><strong>Likely Cause:</strong> PSU voltage sag under load</p>
<p><strong>Fix:</strong> - Check PSU wattage vs.&nbsp;actual load - Use dedicated PSU for bed - Check wire gauge (undersized wires drop voltage)</p>
</section>
<section id="symptom-steppers-skip-or-lose-position" class="level3">
<h3 class="anchored" data-anchor-id="symptom-steppers-skip-or-lose-position">Symptom: Steppers Skip or Lose Position</h3>
<p><strong>Likely Cause:</strong> Voltage brownout during bed heating</p>
<p><strong>Fix:</strong> - Separate bed onto different PSU - Reduce stepper current slightly - Add bulk capacitor near stepper drivers</p>
</section>
<section id="symptom-board-wont-power-on" class="level3">
<h3 class="anchored" data-anchor-id="symptom-board-wont-power-on">Symptom: Board Won’t Power On</h3>
<p><strong>Likely Cause:</strong> - 12V board connected to 24V (check for damage) - USB back-powering with low-current source</p>
<p><strong>Fix:</strong> - Verify voltage compatibility - Apply 5V tape trick - Check for blown fuses or burned components</p>
<hr>
</section>
</section>
<section id="summary-recommended-configuration" class="level2">
<h2 class="anchored" data-anchor-id="summary-recommended-configuration">Summary: Recommended Configuration</h2>
<p>For Amalgam “Tier 0” scavenger build:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Setup</th>
<th>Recommendation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>PSU Count</strong></td>
<td>Two (from donor printers)</td>
</tr>
<tr class="even">
<td><strong>Voltage</strong></td>
<td>24V preferred, mixed 12V/24V acceptable</td>
</tr>
<tr class="odd">
<td><strong>PSU 1</strong></td>
<td>Board 1: X, Y1, Y2, Extruder, Hotend, Fans</td>
</tr>
<tr class="even">
<td><strong>PSU 2</strong></td>
<td>Board 2: Z1, Z2, Z3, Heated Bed</td>
</tr>
<tr class="odd">
<td><strong>Common Ground</strong></td>
<td>14–16 AWG between PSU negatives</td>
</tr>
<tr class="even">
<td><strong>AC Side</strong></td>
<td>Single fused inlet, single switch</td>
</tr>
<tr class="odd">
<td><strong>Safety</strong></td>
<td>Ferrules, earth bonding, 5V tape trick</td>
</tr>
</tbody>
</table>
<p><strong>The Golden Rules:</strong> 1. ✅ Common DC Ground (tie negatives together) 2. ❌ Never parallel positives 3. ✅ Single AC switch for all PSUs 4. ✅ Verify voltage compatibility before connecting</p>
<hr>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<ul>
<li>Klipper Multi-MCU Documentation</li>
<li>Meanwell PSU Specifications</li>
<li>RepRap Wiki: Power Supply</li>
<li>3D Printing Community Safety Guidelines</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/theamalgam\.org");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>